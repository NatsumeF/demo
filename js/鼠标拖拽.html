<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
	#box{
		background: red;
		height: 100px;
		width: 100px;
		position: relative;
		left: 600px;
	}

	</style>
</head>
<body>
	<div id="box">
		
		<button>点我不能动</button>

	</div>
	
	<script>
	var div = document.getElementById("box");
	but = document.getElementsByTagName("button")[0];

	function getOffset(ele) {
		var ele = ele,
			flg = false,
			x = ele.offsetLeft,
			y = ele.offsetTop;
		if (ele.offsetparent) {
			ele = ele.offsetparent;
			x += ele.offsetLeft
			y += ele.offsetTop
		}
		return {
			x: x,
			y: y
		}
	};
	div.addEventListener("mousedown", function(e) {
		flg = true;
		if (e.target === but) {
			console.log("点到我了")
			return false;
		}
		var mouseX = e.clientX,
			mouseY = e.clientY,
			divX = getOffset(this).x,
			divY = getOffset(this).y;

		function move(e) {
			if (flg) {
				var _x = e.clientX,
					_y = e.clientY;
				div.style.left = _x - (mouseX - divX) + "px";
				div.style.top = _y - (mouseY - divY) + "px";
				console.log(1)
			}
		}
		window.addEventListener("mousemove", move)
		div.onmouseup = function() {
			flg = false;
			window.removeEventListener("mousemove", move)
		}

		console.log("点到我了div")
	})
</script>
</body>
</html>